<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>cmake/FindCXSparse.cmake - ceres-solver - Git at Google</title><link rel="stylesheet" type="text/css" href="//www.google.com/css/go.css" /><link rel="stylesheet" type="text/css" href="/+static/prettify/prettify.vf-M93Ay4IiiWRQSJKPGWQ.cache.css" /><link rel="stylesheet" type="text/css" href="/+static/gitiles.NflJW88ZoV70lY6sErU9Rw.cache.css" /></head><body><h1><img src="//www.google.com/images/logo_sm.gif" alt="Google" />Git</h1><div class="menu"> <a href="https://www.google.com/a/SelectSession?service=gerritcodereview&amp;continue=https://ceres-solver.googlesource.com/login/ceres-solver/%2B/b0a8731fcdde31e6c37a54e8c1e1c00f853c0d5c/cmake/FindCXSparse.cmake">Sign in</a> </div><div class="breadcrumbs"><a href="/?format=HTML">ceres-solver</a> / <a href="/ceres-solver/">ceres-solver</a> / <a href="/ceres-solver/+/b0a8731fcdde31e6c37a54e8c1e1c00f853c0d5c">b0a8731fcdde31e6c37a54e8c1e1c00f853c0d5c</a> / <a href="/ceres-solver/+/b0a8731fcdde31e6c37a54e8c1e1c00f853c0d5c/">.</a> / <a href="/ceres-solver/+/b0a8731fcdde31e6c37a54e8c1e1c00f853c0d5c/cmake">cmake</a> / FindCXSparse.cmake</div><div class="sha1">blob: e291cda8fccdd01ac66c5b4e28a2f27f851d8370 [<a href="/ceres-solver/+/b0a8731fcdde31e6c37a54e8c1e1c00f853c0d5c/cmake/FindCXSparse.cmake">file</a>] [<a href="/ceres-solver/+log/b0a8731fcdde31e6c37a54e8c1e1c00f853c0d5c/cmake/FindCXSparse.cmake">log</a>] [<a href="/ceres-solver/+blame/b0a8731fcdde31e6c37a54e8c1e1c00f853c0d5c/cmake/FindCXSparse.cmake">blame</a>]</div><ol class="prettyprint"><li><a name="1"></a><span class="com"># Ceres Solver - A fast non-linear least squares minimizer</span></li><li><a name="2"></a><span class="com"># Copyright 2013 Google Inc. All rights reserved.</span></li><li><a name="3"></a><span class="com"># http://code.google.com/p/ceres-solver/</span></li><li><a name="4"></a><span class="com">#</span></li><li><a name="5"></a><span class="com"># Redistribution and use in source and binary forms, with or without</span></li><li><a name="6"></a><span class="com"># modification, are permitted provided that the following conditions are met:</span></li><li><a name="7"></a><span class="com">#</span></li><li><a name="8"></a><span class="com"># * Redistributions of source code must retain the above copyright notice,</span></li><li><a name="9"></a><span class="com">#   this list of conditions and the following disclaimer.</span></li><li><a name="10"></a><span class="com"># * Redistributions in binary form must reproduce the above copyright notice,</span></li><li><a name="11"></a><span class="com">#   this list of conditions and the following disclaimer in the documentation</span></li><li><a name="12"></a><span class="com">#   and/or other materials provided with the distribution.</span></li><li><a name="13"></a><span class="com"># * Neither the name of Google Inc. nor the names of its contributors may be</span></li><li><a name="14"></a><span class="com">#   used to endorse or promote products derived from this software without</span></li><li><a name="15"></a><span class="com">#   specific prior written permission.</span></li><li><a name="16"></a><span class="com">#</span></li><li><a name="17"></a><span class="com"># THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span></li><li><a name="18"></a><span class="com"># AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span></li><li><a name="19"></a><span class="com"># IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span></li><li><a name="20"></a><span class="com"># ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE</span></li><li><a name="21"></a><span class="com"># LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span></li><li><a name="22"></a><span class="com"># CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span></li><li><a name="23"></a><span class="com"># SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span></li><li><a name="24"></a><span class="com"># INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span></li><li><a name="25"></a><span class="com"># CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span></li><li><a name="26"></a><span class="com"># ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span></li><li><a name="27"></a><span class="com"># POSSIBILITY OF SUCH DAMAGE.</span></li><li><a name="28"></a><span class="com">#</span></li><li><a name="29"></a><span class="com"># Author: alexs.mac@gmail.com (Alex Stewart)</span></li><li><a name="30"></a><span class="com">#</span></li><li><a name="31"></a></li><li><a name="32"></a><span class="com"># FindCXSparse.cmake - Find CXSparse libraries &amp; dependencies.</span></li><li><a name="33"></a><span class="com">#</span></li><li><a name="34"></a><span class="com"># This module defines the following variables which should be referenced</span></li><li><a name="35"></a><span class="com"># by the caller to use the library.</span></li><li><a name="36"></a><span class="com">#</span></li><li><a name="37"></a><span class="com"># CXSPARSE_FOUND: TRUE iff CXSparse and all dependencies have been found.</span></li><li><a name="38"></a><span class="com"># CXSPARSE_INCLUDE_DIRS: Include directories for CXSparse.</span></li><li><a name="39"></a><span class="com"># CXSPARSE_LIBRARIES: Libraries for CXSparse and all dependencies.</span></li><li><a name="40"></a><span class="com">#</span></li><li><a name="41"></a><span class="com"># CXSPARSE_VERSION: Extracted from cs.h.</span></li><li><a name="42"></a><span class="com"># CXSPARSE_MAIN_VERSION: Equal to 3 if CXSPARSE_VERSION = 3.1.2</span></li><li><a name="43"></a><span class="com"># CXSPARSE_SUB_VERSION: Equal to 1 if CXSPARSE_VERSION = 3.1.2</span></li><li><a name="44"></a><span class="com"># CXSPARSE_SUBSUB_VERSION: Equal to 2 if CXSPARSE_VERSION = 3.1.2</span></li><li><a name="45"></a><span class="com">#</span></li><li><a name="46"></a><span class="com"># The following variables control the behaviour of this module:</span></li><li><a name="47"></a><span class="com">#</span></li><li><a name="48"></a><span class="com"># CXSPARSE_INCLUDE_DIR_HINTS: List of additional directories in which to</span></li><li><a name="49"></a><span class="com">#                             search for CXSparse includes,</span></li><li><a name="50"></a><span class="com">#                             e.g: /timbuktu/include.</span></li><li><a name="51"></a><span class="com"># CXSPARSE_LIBRARY_DIR_HINTS: List of additional directories in which to</span></li><li><a name="52"></a><span class="com">#                             search for CXSparse libraries, e.g: /timbuktu/lib.</span></li><li><a name="53"></a><span class="com">#</span></li><li><a name="54"></a><span class="com"># The following variables are also defined by this module, but in line with</span></li><li><a name="55"></a><span class="com"># CMake recommended FindPackage() module style should NOT be referenced directly</span></li><li><a name="56"></a><span class="com"># by callers (use the plural variables detailed above instead).  These variables</span></li><li><a name="57"></a><span class="com"># do however affect the behaviour of the module via FIND_[PATH/LIBRARY]() which</span></li><li><a name="58"></a><span class="com"># are NOT re-called (i.e. search for library is not repeated) if these variables</span></li><li><a name="59"></a><span class="com"># are set with valid values _in the CMake cache_. This means that if these</span></li><li><a name="60"></a><span class="com"># variables are set directly in the cache, either by the user in the CMake GUI,</span></li><li><a name="61"></a><span class="com"># or by the user passing -DVAR=VALUE directives to CMake when called (which</span></li><li><a name="62"></a><span class="com"># explicitly defines a cache variable), then they will be used verbatim,</span></li><li><a name="63"></a><span class="com"># bypassing the HINTS variables and other hard-coded search locations.</span></li><li><a name="64"></a><span class="com">#</span></li><li><a name="65"></a><span class="com"># CXSPARSE_INCLUDE_DIR: Include directory for CXSparse, not including the</span></li><li><a name="66"></a><span class="com">#                       include directory of any dependencies.</span></li><li><a name="67"></a><span class="com"># CXSPARSE_LIBRARY: CXSparse library, not including the libraries of any</span></li><li><a name="68"></a><span class="com">#                   dependencies.</span></li><li><a name="69"></a></li><li><a name="70"></a><span class="com"># Called if we failed to find CXSparse or any of it&#39;s required dependencies,</span></li><li><a name="71"></a><span class="com"># unsets all public (designed to be used externally) variables and reports</span></li><li><a name="72"></a><span class="com"># error message at priority depending upon [REQUIRED/QUIET/&lt;NONE&gt;] argument.</span></li><li><a name="73"></a><span class="pln">MACRO</span><span class="pun">(</span><span class="pln">CXSPARSE_REPORT_NOT_FOUND REASON_MSG</span><span class="pun">)</span></li><li><a name="74"></a><span class="pln">  UNSET</span><span class="pun">(</span><span class="pln">CXSPARSE_FOUND</span><span class="pun">)</span></li><li><a name="75"></a><span class="pln">  UNSET</span><span class="pun">(</span><span class="pln">CXSPARSE_INCLUDE_DIRS</span><span class="pun">)</span></li><li><a name="76"></a><span class="pln">  UNSET</span><span class="pun">(</span><span class="pln">CXSPARSE_LIBRARIES</span><span class="pun">)</span></li><li><a name="77"></a><span class="pln">  </span><span class="com"># Make results of search visible in the CMake GUI if CXSparse has not</span></li><li><a name="78"></a><span class="pln">  </span><span class="com"># been found so that user does not have to toggle to advanced view.</span></li><li><a name="79"></a><span class="pln">  MARK_AS_ADVANCED</span><span class="pun">(</span><span class="pln">CLEAR CXSPARSE_INCLUDE_DIR</span></li><li><a name="80"></a><span class="pln">                         CXSPARSE_LIBRARY</span><span class="pun">)</span></li><li><a name="81"></a><span class="pln">  </span><span class="com"># Note &lt;package&gt;_FIND_[REQUIRED/QUIETLY] variables defined by FindPackage()</span></li><li><a name="82"></a><span class="pln">  </span><span class="com"># use the camelcase library name, not uppercase.</span></li><li><a name="83"></a><span class="pln">  IF </span><span class="pun">(</span><span class="typ">CXSparse_FIND_QUIETLY</span><span class="pun">)</span></li><li><a name="84"></a><span class="pln">    MESSAGE</span><span class="pun">(</span><span class="pln">STATUS </span><span class="str">&quot;Failed to find CXSparse - &quot;</span><span class="pln"> $</span><span class="pun">{</span><span class="pln">REASON_MSG</span><span class="pun">}</span><span class="pln"> $</span><span class="pun">{</span><span class="pln">ARGN</span><span class="pun">})</span></li><li><a name="85"></a><span class="pln">  ELSEIF </span><span class="pun">(</span><span class="typ">CXSparse_FIND_REQUIRED</span><span class="pun">)</span></li><li><a name="86"></a><span class="pln">    MESSAGE</span><span class="pun">(</span><span class="pln">FATAL_ERROR </span><span class="str">&quot;Failed to find CXSparse - &quot;</span><span class="pln"> $</span><span class="pun">{</span><span class="pln">REASON_MSG</span><span class="pun">}</span><span class="pln"> $</span><span class="pun">{</span><span class="pln">ARGN</span><span class="pun">})</span></li><li><a name="87"></a><span class="pln">  ELSE</span><span class="pun">()</span></li><li><a name="88"></a><span class="pln">    </span><span class="com"># Neither QUIETLY nor REQUIRED, use WARNING which emits a message</span></li><li><a name="89"></a><span class="pln">    </span><span class="com"># but continues configuration and allows generation.</span></li><li><a name="90"></a><span class="pln">    MESSAGE</span><span class="pun">(</span><span class="pln">WARNING </span><span class="str">&quot;Failed to find CXSparse - &quot;</span><span class="pln"> $</span><span class="pun">{</span><span class="pln">REASON_MSG</span><span class="pun">}</span><span class="pln"> $</span><span class="pun">{</span><span class="pln">ARGN</span><span class="pun">})</span></li><li><a name="91"></a><span class="pln">  ENDIF </span><span class="pun">()</span></li><li><a name="92"></a><span class="pln">ENDMACRO</span><span class="pun">(</span><span class="pln">CXSPARSE_REPORT_NOT_FOUND</span><span class="pun">)</span></li><li><a name="93"></a></li><li><a name="94"></a><span class="com"># Search user-installed locations first, so that we prefer user installs</span></li><li><a name="95"></a><span class="com"># to system installs where both exist.</span></li><li><a name="96"></a><span class="com">#</span></li><li><a name="97"></a><span class="com"># TODO: Add standard Windows search locations for CXSparse.</span></li><li><a name="98"></a><span class="pln">LIST</span><span class="pun">(</span><span class="pln">APPEND CXSPARSE_CHECK_INCLUDE_DIRS</span></li><li><a name="99"></a><span class="pln">  </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">include</span></li><li><a name="100"></a><span class="pln">  </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">homebrew</span><span class="pun">/</span><span class="pln">include </span><span class="com"># Mac OS X</span></li><li><a name="101"></a><span class="pln">  </span><span class="pun">/</span><span class="pln">opt</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">macports</span><span class="pun">/</span><span class="pln">software </span><span class="com"># Mac OS X.</span></li><li><a name="102"></a><span class="pln">  </span><span class="pun">/</span><span class="pln">opt</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">include</span></li><li><a name="103"></a><span class="pln">  </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">include</span><span class="pun">)</span></li><li><a name="104"></a><span class="pln">LIST</span><span class="pun">(</span><span class="pln">APPEND CXSPARSE_CHECK_LIBRARY_DIRS</span></li><li><a name="105"></a><span class="pln">  </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">lib</span></li><li><a name="106"></a><span class="pln">  </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">homebrew</span><span class="pun">/</span><span class="pln">lib </span><span class="com"># Mac OS X.</span></li><li><a name="107"></a><span class="pln">  </span><span class="pun">/</span><span class="pln">opt</span><span class="pun">/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">lib</span></li><li><a name="108"></a><span class="pln">  </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">)</span></li><li><a name="109"></a></li><li><a name="110"></a><span class="com"># Search supplied hint directories first if supplied.</span></li><li><a name="111"></a><span class="pln">FIND_PATH</span><span class="pun">(</span><span class="pln">CXSPARSE_INCLUDE_DIR</span></li><li><a name="112"></a><span class="pln">  NAMES cs</span><span class="pun">.</span><span class="pln">h</span></li><li><a name="113"></a><span class="pln">  PATHS $</span><span class="pun">{</span><span class="pln">CXSPARSE_INCLUDE_DIR_HINTS</span><span class="pun">}</span></li><li><a name="114"></a><span class="pln">  $</span><span class="pun">{</span><span class="pln">CXSPARSE_CHECK_INCLUDE_DIRS</span><span class="pun">})</span></li><li><a name="115"></a><span class="pln">IF </span><span class="pun">(</span><span class="pln">NOT CXSPARSE_INCLUDE_DIR OR</span></li><li><a name="116"></a><span class="pln">    NOT EXISTS $</span><span class="pun">{</span><span class="pln">CXSPARSE_INCLUDE_DIR</span><span class="pun">})</span></li><li><a name="117"></a><span class="pln">  CXSPARSE_REPORT_NOT_FOUND</span><span class="pun">(</span></li><li><a name="118"></a><span class="pln">    </span><span class="str">&quot;Could not find CXSparse include directory, set CXSPARSE_INCLUDE_DIR &quot;</span></li><li><a name="119"></a><span class="pln">    </span><span class="str">&quot;to directory containing cs.h&quot;</span><span class="pun">)</span></li><li><a name="120"></a><span class="pln">ENDIF </span><span class="pun">(</span><span class="pln">NOT CXSPARSE_INCLUDE_DIR OR</span></li><li><a name="121"></a><span class="pln">       NOT EXISTS $</span><span class="pun">{</span><span class="pln">CXSPARSE_INCLUDE_DIR</span><span class="pun">})</span></li><li><a name="122"></a></li><li><a name="123"></a><span class="pln">FIND_LIBRARY</span><span class="pun">(</span><span class="pln">CXSPARSE_LIBRARY NAMES cxsparse</span></li><li><a name="124"></a><span class="pln">  PATHS $</span><span class="pun">{</span><span class="pln">CXSPARSE_LIBRARY_DIR_HINTS</span><span class="pun">}</span></li><li><a name="125"></a><span class="pln">  $</span><span class="pun">{</span><span class="pln">CXSPARSE_CHECK_LIBRARY_DIRS</span><span class="pun">})</span></li><li><a name="126"></a><span class="pln">IF </span><span class="pun">(</span><span class="pln">NOT CXSPARSE_LIBRARY OR</span></li><li><a name="127"></a><span class="pln">    NOT EXISTS $</span><span class="pun">{</span><span class="pln">CXSPARSE_LIBRARY</span><span class="pun">})</span></li><li><a name="128"></a><span class="pln">  CXSPARSE_REPORT_NOT_FOUND</span><span class="pun">(</span></li><li><a name="129"></a><span class="pln">    </span><span class="str">&quot;Could not find CXSparse library, set CXSPARSE_LIBRARY &quot;</span></li><li><a name="130"></a><span class="pln">    </span><span class="str">&quot;to full path to libcxsparse.&quot;</span><span class="pun">)</span></li><li><a name="131"></a><span class="pln">ENDIF </span><span class="pun">(</span><span class="pln">NOT CXSPARSE_LIBRARY OR</span></li><li><a name="132"></a><span class="pln">       NOT EXISTS $</span><span class="pun">{</span><span class="pln">CXSPARSE_LIBRARY</span><span class="pun">})</span></li><li><a name="133"></a></li><li><a name="134"></a><span class="com"># Mark internally as found, then verify. CXSPARSE_REPORT_NOT_FOUND() unsets</span></li><li><a name="135"></a><span class="com"># if called.</span></li><li><a name="136"></a><span class="pln">SET</span><span class="pun">(</span><span class="pln">CXSPARSE_FOUND TRUE</span><span class="pun">)</span></li><li><a name="137"></a></li><li><a name="138"></a><span class="com"># Extract CXSparse version from cs.h</span></li><li><a name="139"></a><span class="pln">IF </span><span class="pun">(</span><span class="pln">CXSPARSE_INCLUDE_DIR</span><span class="pun">)</span></li><li><a name="140"></a><span class="pln">  SET</span><span class="pun">(</span><span class="pln">CXSPARSE_VERSION_FILE $</span><span class="pun">{</span><span class="pln">CXSPARSE_INCLUDE_DIR</span><span class="pun">}/</span><span class="pln">cs</span><span class="pun">.</span><span class="pln">h</span><span class="pun">)</span></li><li><a name="141"></a><span class="pln">  IF </span><span class="pun">(</span><span class="pln">NOT EXISTS $</span><span class="pun">{</span><span class="pln">CXSPARSE_VERSION_FILE</span><span class="pun">})</span></li><li><a name="142"></a><span class="pln">    CXSPARSE_REPORT_NOT_FOUND</span><span class="pun">(</span></li><li><a name="143"></a><span class="pln">      </span><span class="str">&quot;Could not find file: ${CXSPARSE_VERSION_FILE} &quot;</span></li><li><a name="144"></a><span class="pln">      </span><span class="str">&quot;containing version information in CXSparse install located at: &quot;</span></li><li><a name="145"></a><span class="pln">      </span><span class="str">&quot;${CXSPARSE_INCLUDE_DIR}.&quot;</span><span class="pun">)</span></li><li><a name="146"></a><span class="pln">  ELSE </span><span class="pun">(</span><span class="pln">NOT EXISTS $</span><span class="pun">{</span><span class="pln">CXSPARSE_VERSION_FILE</span><span class="pun">})</span></li><li><a name="147"></a><span class="pln">    FILE</span><span class="pun">(</span><span class="pln">READ $</span><span class="pun">{</span><span class="pln">CXSPARSE_INCLUDE_DIR</span><span class="pun">}/</span><span class="pln">cs</span><span class="pun">.</span><span class="pln">h CXSPARSE_VERSION_FILE_CONTENTS</span><span class="pun">)</span></li><li><a name="148"></a></li><li><a name="149"></a><span class="pln">    STRING</span><span class="pun">(</span><span class="pln">REGEX MATCH </span><span class="str">&quot;#define CS_VER [0-9]+&quot;</span></li><li><a name="150"></a><span class="pln">      CXSPARSE_MAIN_VERSION </span><span class="str">&quot;${CXSPARSE_VERSION_FILE_CONTENTS}&quot;</span><span class="pun">)</span></li><li><a name="151"></a><span class="pln">    STRING</span><span class="pun">(</span><span class="pln">REGEX REPLACE </span><span class="str">&quot;#define CS_VER ([0-9]+)&quot;</span><span class="pln"> </span><span class="str">&quot;\\1&quot;</span></li><li><a name="152"></a><span class="pln">      CXSPARSE_MAIN_VERSION </span><span class="str">&quot;${CXSPARSE_MAIN_VERSION}&quot;</span><span class="pun">)</span></li><li><a name="153"></a></li><li><a name="154"></a><span class="pln">    STRING</span><span class="pun">(</span><span class="pln">REGEX MATCH </span><span class="str">&quot;#define CS_SUBVER [0-9]+&quot;</span></li><li><a name="155"></a><span class="pln">      CXSPARSE_SUB_VERSION </span><span class="str">&quot;${CXSPARSE_VERSION_FILE_CONTENTS}&quot;</span><span class="pun">)</span></li><li><a name="156"></a><span class="pln">    STRING</span><span class="pun">(</span><span class="pln">REGEX REPLACE </span><span class="str">&quot;#define CS_SUBVER ([0-9]+)&quot;</span><span class="pln"> </span><span class="str">&quot;\\1&quot;</span></li><li><a name="157"></a><span class="pln">      CXSPARSE_SUB_VERSION </span><span class="str">&quot;${CXSPARSE_SUB_VERSION}&quot;</span><span class="pun">)</span></li><li><a name="158"></a></li><li><a name="159"></a><span class="pln">    STRING</span><span class="pun">(</span><span class="pln">REGEX MATCH </span><span class="str">&quot;#define CS_SUBSUB [0-9]+&quot;</span></li><li><a name="160"></a><span class="pln">      CXSPARSE_SUBSUB_VERSION </span><span class="str">&quot;${CXSPARSE_VERSION_FILE_CONTENTS}&quot;</span><span class="pun">)</span></li><li><a name="161"></a><span class="pln">    STRING</span><span class="pun">(</span><span class="pln">REGEX REPLACE </span><span class="str">&quot;#define CS_SUBSUB ([0-9]+)&quot;</span><span class="pln"> </span><span class="str">&quot;\\1&quot;</span></li><li><a name="162"></a><span class="pln">      CXSPARSE_SUBSUB_VERSION </span><span class="str">&quot;${CXSPARSE_SUBSUB_VERSION}&quot;</span><span class="pun">)</span></li><li><a name="163"></a></li><li><a name="164"></a><span class="pln">    </span><span class="com"># This is on a single line s/t CMake does not interpret it as a list of</span></li><li><a name="165"></a><span class="pln">    </span><span class="com"># elements and insert &#39;;&#39; separators which would result in 3.;1.;2 nonsense.</span></li><li><a name="166"></a><span class="pln">    SET</span><span class="pun">(</span><span class="pln">CXSPARSE_VERSION </span><span class="str">&quot;${CXSPARSE_MAIN_VERSION}.${CXSPARSE_SUB_VERSION}.${CXSPARSE_SUBSUB_VERSION}&quot;</span><span class="pun">)</span></li><li><a name="167"></a><span class="pln">  ENDIF </span><span class="pun">(</span><span class="pln">NOT EXISTS $</span><span class="pun">{</span><span class="pln">CXSPARSE_VERSION_FILE</span><span class="pun">})</span></li><li><a name="168"></a><span class="pln">ENDIF </span><span class="pun">(</span><span class="pln">CXSPARSE_INCLUDE_DIR</span><span class="pun">)</span></li><li><a name="169"></a></li><li><a name="170"></a><span class="com"># Catch the case when the caller has set CXSPARSE_LIBRARY in the cache / GUI and</span></li><li><a name="171"></a><span class="com"># thus FIND_LIBRARY was not called, but specified library is invalid, otherwise</span></li><li><a name="172"></a><span class="com"># we would report CXSparse as found.</span></li><li><a name="173"></a><span class="com"># TODO: This regex for CXSparse library is pretty primitive, we use lowercase</span></li><li><a name="174"></a><span class="com">#       for comparison to handle Windows using CamelCase library names, could</span></li><li><a name="175"></a><span class="com">#       this check be better?</span></li><li><a name="176"></a><span class="pln">STRING</span><span class="pun">(</span><span class="pln">TOLOWER </span><span class="str">&quot;${CXSPARSE_LIBRARY}&quot;</span><span class="pln"> LOWERCASE_CXSPARSE_LIBRARY</span><span class="pun">)</span></li><li><a name="177"></a><span class="pln">IF </span><span class="pun">(</span><span class="pln">CXSPARSE_LIBRARY AND</span></li><li><a name="178"></a><span class="pln">    EXISTS $</span><span class="pun">{</span><span class="pln">CXSPARSE_LIBRARY</span><span class="pun">}</span><span class="pln"> AND</span></li><li><a name="179"></a><span class="pln">    NOT </span><span class="str">&quot;${LOWERCASE_CXSPARSE_LIBRARY}&quot;</span><span class="pln"> MATCHES </span><span class="str">&quot;.*cxsparse[^/]*&quot;</span><span class="pun">)</span></li><li><a name="180"></a><span class="pln">  CXSPARSE_REPORT_NOT_FOUND</span><span class="pun">(</span></li><li><a name="181"></a><span class="pln">    </span><span class="str">&quot;Caller defined CXSPARSE_LIBRARY: &quot;</span></li><li><a name="182"></a><span class="pln">    </span><span class="str">&quot;${CXSPARSE_LIBRARY} does not match CXSparse.&quot;</span><span class="pun">)</span></li><li><a name="183"></a><span class="pln">ENDIF </span><span class="pun">(</span><span class="pln">CXSPARSE_LIBRARY AND</span></li><li><a name="184"></a><span class="pln">       EXISTS $</span><span class="pun">{</span><span class="pln">CXSPARSE_LIBRARY</span><span class="pun">}</span><span class="pln"> AND</span></li><li><a name="185"></a><span class="pln">       NOT </span><span class="str">&quot;${LOWERCASE_CXSPARSE_LIBRARY}&quot;</span><span class="pln"> MATCHES </span><span class="str">&quot;.*cxsparse[^/]*&quot;</span><span class="pun">)</span></li><li><a name="186"></a></li><li><a name="187"></a><span class="com"># Set standard CMake FindPackage variables if found.</span></li><li><a name="188"></a><span class="pln">IF </span><span class="pun">(</span><span class="pln">CXSPARSE_FOUND</span><span class="pun">)</span></li><li><a name="189"></a><span class="pln">  SET</span><span class="pun">(</span><span class="pln">CXSPARSE_INCLUDE_DIRS $</span><span class="pun">{</span><span class="pln">CXSPARSE_INCLUDE_DIR</span><span class="pun">})</span></li><li><a name="190"></a><span class="pln">  SET</span><span class="pun">(</span><span class="pln">CXSPARSE_LIBRARIES $</span><span class="pun">{</span><span class="pln">CXSPARSE_LIBRARY</span><span class="pun">})</span></li><li><a name="191"></a><span class="pln">ENDIF </span><span class="pun">(</span><span class="pln">CXSPARSE_FOUND</span><span class="pun">)</span></li><li><a name="192"></a></li><li><a name="193"></a><span class="com"># Handle REQUIRED / QUIET optional arguments and version.</span></li><li><a name="194"></a><span class="pln">INCLUDE</span><span class="pun">(</span><span class="typ">FindPackageHandleStandardArgs</span><span class="pun">)</span></li><li><a name="195"></a><span class="pln">FIND_PACKAGE_HANDLE_STANDARD_ARGS</span><span class="pun">(</span><span class="typ">CXSparse</span></li><li><a name="196"></a><span class="pln">  REQUIRED_VARS CXSPARSE_INCLUDE_DIRS CXSPARSE_LIBRARIES</span></li><li><a name="197"></a><span class="pln">  VERSION_VAR CXSPARSE_VERSION</span><span class="pun">)</span></li><li><a name="198"></a></li><li><a name="199"></a><span class="com"># Only mark internal variables as advanced if we found CXSparse, otherwise</span></li><li><a name="200"></a><span class="com"># leave them visible in the standard GUI for the user to set manually.</span></li><li><a name="201"></a><span class="pln">IF </span><span class="pun">(</span><span class="pln">CXSPARSE_FOUND</span><span class="pun">)</span></li><li><a name="202"></a><span class="pln">  MARK_AS_ADVANCED</span><span class="pun">(</span><span class="pln">FORCE CXSPARSE_INCLUDE_DIR</span></li><li><a name="203"></a><span class="pln">                         CXSPARSE_LIBRARY</span><span class="pun">)</span></li><li><a name="204"></a><span class="pln">ENDIF </span><span class="pun">(</span><span class="pln">CXSPARSE_FOUND</span><span class="pun">)</span></li></ol><div class="footer">Powered by <a href="https://code.google.com/p/gitiles/">Gitiles</a></div></body></html>